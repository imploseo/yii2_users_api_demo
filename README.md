<p align="center">
    <a href="https://github.com/yiisoft" target="_blank">
        <img src="https://avatars0.githubusercontent.com/u/993323" height="100px">
    </a>
    <h1 align="center">Тестовое задание REST API на Yii 2</h1>
    <br>
</p>

Вот как была поставлена задача Шевченко Павлу для тестового задания потенциальным работодателем:<br>Написать апи сервер, который будет работать с 1 моделью user, в юзере поля: id, name, createat, updateat, status, реализовать методы добавления, изменения, удаления, просмотр + композер скрипт создать + написать тесты + консольную утилиту сделать, которая сохранит таблицу в эксель. наплодить 5-10 пользователей. консольная утилита должна запускаться через метод апи.
<br><br>
А далее я напишу пояснения к моей реализации пунктов из этого задания:<br>
1). За основу взял репозиторий шаблона приложения Yii2-advanced. В composer.json добавил библиотеку PHPExcel, которая используется далее.<br>
2). В модели User реализовал паттерн Состояние, т.к. статусов у пользователей может быть много, и тогда сопутствующую логику переключений из одних состояний в другие будет нецелесообразно размещать в классе модели - для примера я сделал запрет на прямой перевод из удалённого состояния в активное. Также настроил правила валидации полей модели и поведение для обновления полей createdAt и updatedAt.<br>
3). Для API реализовал версионирование и валидацию по секретному токену (в HTTP заголовках) для запросов на добавление, обновление или удаление пользователя, при этом при удалении пользователь не удаляется из БД, а переводится в статус "Deleted".<br>
4). Помимо реализации описанного выше контроллера запросов к /api_v1/users/ добавил в него возможность обработки запросов к /api_v1/users/excel - для запуска консольной утилиты генерации Excel-файла с таблицей пользователей имеющих статус не "Deleted".<br>
5). Сделал консольную утилиту, файл с указанием даты и времени сохраняется в заданной относительно корня сайта директории (в папку /excel).<br>
6). Для генерации пользователей добавил миграции.<br>
7). Написал тесты для CRUD методов REST API, запускать (поменяв REST_API_SITE_URL) отдельно от коробочных yii2-demo тестов (т.к. я менял структуру таблицы и модель пользователя), т.е: codecept run frontend/tests/unit/UserRestApiUnitTest.php<br>
8). Загрузил на гитхаб, основное внимание следует обращать на предпоследний коммит, в нём я сосредоточил основные значимые для выполнения тестового задания файлы.